<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Desert Elite - @Hussein.90s</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #2c3e50; font-family: sans-serif; -webkit-user-select: none; touch-action: none; }
        canvas { display: block; }
        
        #hud {
            position: absolute; top: 0; width: 100%; height: 55px;
            background: rgba(0, 0, 0, 0.75); border-bottom: 2px solid #ffd700;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #ffd700; z-index: 10;
        }
        #profile-area { display: flex; align-items: center; margin-bottom: 2px; }
        #profile-img { width: 20px; height: 20px; border-radius: 50%; border: 1px solid #ffd700; margin-right: 6px; background: #444; }
        #stats { display: flex; width: 90%; justify-content: space-around; font-size: 13px; font-weight: bold; }
        #event-text { position: absolute; top: 65px; width: 100%; text-align: center; color: #fff; font-size: 16px; font-weight: bold; text-shadow: 2px 2px #000; z-index: 5; }
        
        .controls { position: absolute; bottom: 10px; width: 100%; display: flex; justify-content: space-between; padding: 0 10px; box-sizing: border-box; }
        .btn { width: 85px; height: 65px; background: rgba(255, 255, 255, 0.3); border: 2px solid #fff; border-radius: 12px; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body>

<div id="hud">
    <div id="profile-area">
        <img src="channels4_profile.jpg" id="profile-img" onerror="this.style.display='none'">
        <div style="font-size: 10px; color: #fff;">@Hussein.90s</div>
    </div>
    <div id="stats">
        <div>KM: <span id="dist">0</span></div>
        <div>GOLD: <span id="coins">0</span></div>
    </div>
</div>
<div id="event-text"></div>

<canvas id="gameCanvas"></canvas>

<div class="controls">
    <div id="btnJump" class="btn">JUMP ‚ñ≤</div>
    <div id="btnNitro" class="btn" style="border-color:#ff4500; color:#ff4500">NITRO üî•</div>
</div>

<script>
    var canvas = document.getElementById('gameCanvas');
    var ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    var game = {
        dist: 0, coins: 0, 
        speed: 5,        // ÿßŸÑÿ≥ÿ±ÿπÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© ÿßŸÑŸÅÿπÿßŸÑÿ©
        baseSpeed: 5,    // ÿßŸÑÿ≥ÿ±ÿπÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
        nitroActive: false, 
        active: true,
        groundY: canvas.height - 60, shake: 0,
        event: "NONE", eventTimer: 0, spawnWait: 0,
        particles: [], clouds: []
    };

    var player = {
        x: 40, y: 0, w: 35, h: 20,
        vy: 0, grav: 0.8, baseGrav: 0.8, jump: -11, alive: true
    };

    var objects = [], roadCracks = [];

    for(var i=0; i<4; i++) {
        game.clouds.push({ x: Math.random()*canvas.width, y: Math.random()*100 + 20, s: Math.random()*0.5 + 0.2, w: 50+Math.random()*30 });
    }

    function createExplosion(x, y) {
        for (var i = 0; i < 12; i++) {
            game.particles.push({
                x: x, y: y, vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*10,
                size: Math.random()*4+2, life: 1.0
            });
        }
    }

    function update() {
        for (var i = game.particles.length - 1; i >= 0; i--) {
            var p = game.particles[i]; p.x += p.vx; p.y += p.vy; p.life -= 0.03;
            if (p.life <= 0) game.particles.splice(i, 1);
        }

        if (!game.active) return;

        // ŸÖŸÜÿ∑ŸÇ ÿßŸÑÿ≥ÿ±ÿπÿ©: ÿßŸÑŸÜŸäÿ™ÿ±Ÿà Ÿäÿ∂ŸäŸÅ 5 ÿØÿ±ÿ¨ÿßÿ™ ÿπŸÑŸâ ÿßŸÑÿ≥ÿ±ÿπÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©
        var currentTargetSpeed = (game.event === "BOOST") ? 12 : game.baseSpeed;
        game.speed = game.nitroActive ? currentTargetSpeed + 5 : currentTargetSpeed;

        for (var i = 0; i < game.clouds.length; i++) {
            game.clouds[i].x -= game.clouds[i].s;
            if (game.clouds[i].x < -100) game.clouds[i].x = canvas.width + 50;
        }

        player.vy += player.grav;
        player.y += player.vy;

        if (player.y >= game.groundY - player.h) {
            var overCrack = false;
            for (var i = 0; i < roadCracks.length; i++) {
                if (player.x + 10 > roadCracks[i].x && player.x + 25 < roadCracks[i].x + roadCracks[i].w) {
                    overCrack = true; break;
                }
            }
            if (overCrack) gameOver();
            else { player.y = game.groundY - player.h; player.vy = 0; }
        }

        game.dist += (game.speed / 15);
        document.getElementById('dist').innerText = Math.floor(game.dist);

        for (var i = objects.length - 1; i >= 0; i--) {
            var o = objects[i]; o.x -= game.speed;
            if (player.x < o.x + o.w && player.x + player.w > o.x &&
                player.y < o.y + o.h && player.y + player.h > o.y) {
                if (o.type === 'coin') {
                    game.coins++; document.getElementById('coins').innerText = game.coins;
                    objects.splice(i, 1);
                } else { gameOver(); }
            }
            if (o.x < -50) objects.splice(i, 1);
        }

        for (var j = roadCracks.length - 1; j >= 0; j--) {
            roadCracks[j].x -= game.speed;
            if (roadCracks[j].x < -150) roadCracks.splice(j, 1);
        }

        spawnLogic();
        handleEvents();
    }

    function spawnLogic() {
        if (game.spawnWait > 0) { game.spawnWait -= game.speed; return; }
        if (Math.random() < 0.04) {
            var type = Math.random() > 0.7 ? 'coin' : 'cactus';
            if (type === 'coin') objects.push({ x: canvas.width + 20, y: game.groundY - 70, w: 20, h: 20, type: 'coin' });
            else objects.push({ x: canvas.width + 20, y: game.groundY - 35, w: 20, h: 35, type: 'cactus' });
            game.spawnWait = 180;
        }
    }

    function handleEvents() {
        if (game.eventTimer > 0) {
            game.eventTimer--;
        } else {
            game.event = "NONE";
            player.grav = player.baseGrav;
            document.getElementById('event-text').innerText = "";
            
            if (Math.random() < 0.006 && game.dist > 50) {
                var r = Math.random();
                if (r < 0.25) {
                    game.event = "QUAKE"; game.eventTimer = 120;
                    document.getElementById('event-text').innerText = "‚ö†Ô∏è EARTHQUAKE!";
                } else if (r < 0.5) {
                    game.event = "STORM"; game.eventTimer = 200;
                    document.getElementById('event-text').innerText = "üí® SANDSTORM!";
                } else if (r < 0.75) {
                    game.event = "GRAVITY"; game.eventTimer = 150;
                    player.grav = 0.3;
                    document.getElementById('event-text').innerText = "‚òÅÔ∏è LOW GRAVITY!";
                } else {
                    game.event = "BOOST"; game.eventTimer = 100;
                    document.getElementById('event-text').innerText = "‚ö° SUPER SPEED!";
                }
            }
        }
    }

    function gameOver() {
        if (!game.active) return;
        game.active = false; game.shake = 15; player.alive = false;
        createExplosion(player.x + player.w/2, player.y + player.h/2);
        setTimeout(function() { location.reload(); }, 1800);
    }

    function draw() {
        var skyColor = "#4facfe";
        if (game.event === "STORM") skyColor = "#e67e22";
        if (game.event === "GRAVITY") skyColor = "#2c3e50";
        ctx.fillStyle = skyColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = "rgba(255,255,255,0.7)";
        for(var i=0; i<game.clouds.length; i++) {
            var c = game.clouds[i];
            ctx.beginPath(); ctx.arc(c.x, c.y, c.w/2, 0, Math.PI*2); ctx.fill();
        }

        ctx.save();
        if (game.shake > 0 || game.event === "QUAKE") {
            var s = game.shake > 0 ? game.shake : 3;
            ctx.translate(Math.random()*s - s/2, Math.random()*s - s/2);
            if(game.shake > 0) game.shake *= 0.9;
        }

        ctx.fillStyle = "#e67e22";
        ctx.fillRect(0, game.groundY, canvas.width, 60);

        ctx.fillStyle = "#2c3e50";
        for (var i = 0; i < roadCracks.length; i++) ctx.fillRect(roadCracks[i].x, game.groundY, roadCracks[i].w, 60);

        for (var i = 0; i < objects.length; i++) {
            var o = objects[i];
            if (o.type === 'coin') {
                ctx.fillStyle = "#ffd700"; ctx.beginPath(); ctx.arc(o.x+10, o.y+10, 10, 0, Math.PI*2); ctx.fill();
            } else {
                ctx.fillStyle = "#1b5e20"; ctx.fillRect(o.x+6, o.y, 8, 35); ctx.fillRect(o.x, o.y+10, 20, 5);
            }
        }

        if (player.alive) {
            ctx.fillStyle = "#e74c3c"; ctx.fillRect(player.x, player.y, player.w, player.h);
            ctx.fillStyle = "#000"; 
            ctx.fillRect(player.x+5, player.y+player.h, 8, 5); 
            ctx.fillRect(player.x+22, player.y+player.h, 8, 5);
            // ÿ™ÿ£ÿ´Ÿäÿ± ÿ®ÿµÿ±Ÿä ÿ®ÿ≥Ÿäÿ∑ ŸÑŸÑŸÜŸäÿ™ÿ±Ÿà (ŸÑŸáÿ® ÿÆŸÑŸÅ ÿßŸÑÿ≥Ÿäÿßÿ±ÿ©)
            if(game.nitroActive) {
                ctx.fillStyle = "#ff4500";
                ctx.fillRect(player.x - 10, player.y + 5, 10, 10);
            }
        }

        for (var i = 0; i < game.particles.length; i++) {
            var p = game.particles[i]; ctx.fillStyle = "rgba(255, 69, 0, " + p.life + ")"; ctx.fillRect(p.x, p.y, p.size, p.size);
        }

        ctx.restore();
    }

    function loop() { update(); draw(); setTimeout(loop, 35); }

    // ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ±
    var btnJump = document.getElementById('btnJump');
    var btnNitro = document.getElementById('btnNitro');

    btnJump.addEventListener('touchstart', function(e) {
        e.preventDefault();
        if (game.active && player.y >= game.groundY - player.h - 10) player.vy = player.jump;
    }, false);

    btnNitro.addEventListener('touchstart', function(e) {
        e.preventDefault();
        game.nitroActive = true;
    }, false);

    btnNitro.addEventListener('touchend', function(e) {
        e.preventDefault();
        game.nitroActive = false;
    }, false);

    loop();
</script>
</body>
</html>
